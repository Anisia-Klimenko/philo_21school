# philo_21school

Многопоточная симуляция жизни философов

## Общая суть симуляции

• Один или несколько философов сидят за круглым столом. В центре стола стоит большая тарелка со спагетти.

• Философы попеременно едят, думают или спят. Пока они едят, они не думают и не спят; думая, они не едят и не спят; и, конечно, во сне они не едят и не думают.

• На столе также лежат вилки. Вилок столько же, сколько философов.

• Поскольку подавать и есть спагетти только одной вилкой очень неудобно, философ берет их правую и левую вилки, чтобы есть, по одной в каждую руку.

• Покончив с едой, философ кладет вилки обратно на стол и засыпает. Проснувшись, они снова начинают думать. Симуляция останавливается, когда философ умирает от 
голода.

• Каждый философ должен есть и никогда не должен голодать.

• Философы не разговаривают друг с другом.

• Философы не знают, что другой философ вот-вот умрет.

• Нет необходимости говорить, что философы должны избегать смерти!

## Аргументы

◦ ```number_of_philosophers```: количество философов, а также количество разветвлений.

◦ ```time_to_die``` (в миллисекундах): если философ не начал есть ```time_to_die```
миллисекунд с начала последнего приема пищи или начала симуляции, он умирает.

◦ ```time_to_eat``` (в миллисекундах): время, которое требуется философу, чтобы поесть. В это время ему нужно будет держать две вилки.

◦ ```time_to_sleep``` (в миллисекундах): время, которое философ проведет во сне.

◦ ```number_of_times_each_philosopher_must_eat``` (необязательный аргумент): если все философы поели не менее ```number_of_times_each_philosopher_must_eat``` раз, 
симуляция останавливается. Если не указано иное, симуляция останавливается, когда философ умирает.

Каждому философу присвоено число от 1 до ```number_of_philosophers```.

Философ номер 1 сидит рядом с философом номер ```number_of_philosophers```. Любой другой философ с номером ```N``` находится между философом с номером 
```N - 1``` и философом с номером ```N + 1```.

## Логи программы

Любое изменение состояния философа должно быть оформлено следующим образом:

◦ ```timestamp_in_ms X has taken a fork```

◦ ```timestamp_in_ms X is eating```

◦ ```timestamp_in_ms X is sleeping```

◦ ```timestamp_in_ms X is thinking```

◦ ```timestamp_in_ms X died```

```timestamp_in_ms``` - текущая метка времени в миллисекундах, а ```X``` - номер философа.

Отображаемое сообщение о состоянии не перемешивается с другим сообщением.

Сообщение о смерти философа отображается не более чем через 10 мс после фактической смерти философа.

# Mandatory Part

Особые правила для обязательной части:

• Каждый философ должен быть потоком.

• Между каждой парой философов есть одна развилка. Следовательно, если философов несколько, то у каждого философа есть вилка слева и вилка справа. 
Если есть только один философ, на столе должна быть только одна вилка.

• Каждая вилка - это мьютекс

## Сборка программы

```make``` - компиляция программы

```make clean``` - удаление объектных файлов

```make fclean``` - удаление всех скомпелированных файлов

## Запуск симуляции

```./philo number_of_philosophers time_to_die time_to_eat time_to_sleep [number_of_times_each_philosopher_must_eat]```
